<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jinguizi.mapper.AuthMapper">
    <select id="findAuthorityByParentId" parameterType="integer" resultType="Authority">
        select
        a.id id,
        a.path path,
        a.name name,
        a.component component,
        a.type type,
        a.parent_id parentId,
        a.order `order`,
        a.icon icon
        from authority a,user_role ur ,role_authority ra
        where ur.user_id = #{id}
        and ur.role_id = ra.role_id
        and ra.authority_id = a.id
        and parent_id = #{parentId}
        ORDER BY a.order asc
    </select>
</mapper>